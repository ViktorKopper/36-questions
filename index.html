<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>36 Questions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- IMPORTANT: this must exist as /css/style.css -->
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="./css/end.css" />
  <link rel="stylesheet" href="./css/merge.css" />
</head>
<body>

  <!-- HEARTS BACKGROUND -->
  <div id="hearts-bg"></div>

  <!-- START SCREEN -->
  <div id="start-screen" class="start-screen">
    <h1>36 Questions</h1>
    <p class="subtitle">A game to fall deeper</p>

    <input id="playerAInput" placeholder="Your name" autocomplete="name" />
    <input id="playerBInput" placeholder="Partner's name" autocomplete="off" />

    <button id="startGame" class="btn btn-primary">Start</button>
  </div>

  <!-- GAME SCREEN (2 PANELS) -->
  <div id="game-layout" class="game-layout hidden">

    <!-- LEFT: MAIN GAME -->
    <div class="app">
      <h1>36 Questions</h1>

      <div class="meta">
        <span id="set"></span>

        <div class="progress-wrap">
          <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="36" aria-valuenow="1">
            <div class="progress-fill" id="progressFill"></div>
          </div>
          <div class="progress-label" id="progressLabel">Question 1 / 36</div>
        </div>

        <span id="player"></span>
      </div>

      <div class="card">
        <p id="question"></p>
      </div>

      <div class="answers">
        <label id="myAnswerLabel" class="answer-label">Your answer</label>
        <textarea id="myNote" placeholder="Write your answer..."></textarea>

        <div class="lock-row">
          <button id="lockBtn" class="btn btn-secondary">Lock my answer</button>
          <span id="lockInfo" class="lock-info"></span>
        </div>

        <label id="theirAnswerLabel" class="answer-label">Partner's answer</label>
        <textarea id="theirNote" readonly placeholder="Hidden until both of you lock your answers‚Ä¶"></textarea>
      </div>

      <div class="controls">
        <button id="prev" class="btn btn-secondary">Previous</button>
        <button id="next" class="btn btn-primary">Next</button>
        <button id="finishBtn" class="btn btn-secondary hidden">Conclusion</button>
        <button id="earlyFinishBtn" class="btn btn-secondary hidden">Conclusion (early)</button>
        <button id="reset" class="btn btn-ghost">Reset</button>
      </div>

      <div class="device-role">
        <span class="device-role__label">This device:</span>

        <div class="device-role__switch" id="deviceRoleSwitch" role="group" aria-label="Device role switch">
          <button class="device-role__btn" id="deviceRoleA" type="button">A</button>
          <button class="device-role__btn" id="deviceRoleB" type="button">B</button>
        </div>

        <span class="device-role__hint" id="deviceRoleHint"></span>
      </div>

      <div class="controls">
        <button id="share" class="btn btn-secondary">Share Session</button>
        <button id="copyLink" class="btn btn-secondary">Copy Link</button>
        <button id="howToBtn" class="btn btn-ghost btn-mini">How to play</button>

      </div>

      <div class="controls">
        <input id="importLink" placeholder="Paste partner link here..." />
        <button id="importBtn" class="btn btn-secondary">Import</button>
      </div>

      <div id="mergeReport" class="merge-report hidden"></div>

      <p id="shareInfo" class="share-info"></p>
    </div>

    <!-- RIGHT: ANSWERED QUESTIONS -->
    <aside class="answered-panel">
      <div class="answered-head">
        <h2 class="answered-title">Answered questions</h2>
        <div class="answered-legend">
          <span class="dot dot-a"></span> You
          <span class="dot dot-b"></span> Partner
        </div>
      </div>

      <div class="answered-table-wrap">
        <table class="answered-table" id="answeredTable">
          <thead>
            <tr>
              <th>#</th>
              <th>Set</th>
              <th>Question</th>
              <th class="col-small">You</th>
              <th class="col-small">Partner</th>
            </tr>
          </thead>
          <tbody id="answeredTbody"></tbody>
        </table>
      </div>
    </aside>

  </div>

  <!-- END / CONCLUSION SCREEN -->
  <div id="end-screen" class="end-screen hidden">
    <div class="end-panel">
      <div class="end-head">
        <div>
          <h1 class="end-title">Conclusion</h1>
          <p class="end-subtitle" id="endSubtitle">Your answers side-by-side.</p>
        </div>

        <div class="end-actions">
          <button id="endBackBtn" class="btn btn-secondary">Back to game</button>
          <button id="exportPdfBtn" class="btn btn-primary">Export PDF</button>
          <button id="endResetBtn" class="btn btn-ghost">Reset</button>
        </div>
      </div>

      <div class="end-stats" id="endStats"></div>

      <div class="end-filters">
        <label class="chip">
          <input type="checkbox" id="onlyBothLocked" checked />
          <span>Only fully revealed (both locked)</span>
        </label>

        <label class="chip">
          <input type="checkbox" id="includeQuestions" checked />
          <span>Include question text</span>
        </label>
      </div>

      <div id="comparisonList" class="comparison-list"></div>

      <p class="end-hint">
        Tip: when saving as PDF, enable ‚ÄúBackground graphics‚Äù in the print dialog so the hearts show up.
      </p>
    </div>
  </div>

  <!-- CONFLICT MODAL -->
  <div id="conflictModal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop" id="conflictModalBackdrop"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="conflictModalTitle">
      <div class="modal-head">
        <h3 id="conflictModalTitle">Resolve conflict</h3>
        <button class="btn btn-ghost" id="conflictModalClose">Close</button>
      </div>
      <div class="modal-body" id="conflictModalBody"></div>
    </div>
  </div>

  <div id="howToModal" class="glass-modal hidden" aria-hidden="true">
    <div class="glass-backdrop" id="howToBackdrop"></div>

    <div class="glass-card">
      <div class="glass-header">
        <h2>How to play ‚ù§Ô∏è</h2>
        <button id="howToClose" class="btn btn-ghost">Close</button>
      </div>

      <div class="glass-content">
        <ol class="howto-steps">
          <li>Each of you answers privately on your own device ‚úçÔ∏è</li>
          <li>When ready, press <b>Lock my answer</b> üîí</li>
          <li>Answers stay hidden until <b>both</b> are locked üëÄ</li>
          <li>Use <b>Share / Copy Link</b> to sync with your partner üîó</li>
          <li>If answers differ, resolve conflicts when importing ‚ö†Ô∏è</li>
          <li>Finish all questions ‚Äî or open <b>Conclusion</b> early (Player A) üßæ</li>
        </ol>

        <p class="howto-note">
          üí° Tip: This game works best when you don‚Äôt rush.  
          Take your time and answer honestly.
        </p>
      </div>
    </div>
  </div>


  <!-- Order matters -->
  <script src="./js/questions.js"></script>
  <script src="./js/utils.js"></script>
  <script src="./js/store.js"></script>
  <script src="./js/session.js"></script>
  <script src="./js/hearts.js"></script>

  <script src="./js/pdf-export.js"></script>
  <script src="./js/endgame.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>
